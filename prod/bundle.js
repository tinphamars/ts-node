(()=>{"use strict";var e={196:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Authorizer=void 0;const o=s(r(239));t.Authorizer=class{generateToken(e){return n(this,void 0,void 0,(function*(){const t=new o.default.EventEmitter;return t.addListener("clicked",(function(){console.log("Something is clicked! 234234")})),t.emit("clicked"),"password"===e.password&&"username"===e.username?{tokenId:"someTokenId"}:void 0}))}}},808:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAbstractClass=void 0;t.BaseAbstractClass=class{constructor(e,t){this.req=e,this.res=t}}},256:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Login=void 0;const s=r(808);class o extends s.BaseAbstractClass{constructor(e,t,r){super(e,t),this.tokenGenerator=r}handleRequest(){return n(this,void 0,void 0,(function*(){try{const e=yield this.getRequestBody();(yield this.tokenGenerator.generateToken(e))?this.res.write("Login is successful"):this.res.write("Username or password is valid")}catch(e){this.res.write("Error: "+e.message)}}))}getRequestBody(){return n(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let r="";this.req.on("data",(e=>{r+=e})),this.req.on("end",(()=>{try{e(JSON.parse(r))}catch(e){t(e)}})),this.req.on("error",(e=>{t(e)}))}))}))}}t.Login=o},735:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const s=r(196),o=r(685),i=r(334),a=r(256);t.Server=class{constructor(){this.authorizer=new s.Authorizer}createServer(){(0,o.createServer)(((e,t)=>n(this,void 0,void 0,(function*(){switch(i.Utils.getUrlBasePath(e.url)){case"login":yield new a.Login(e,t,this.authorizer).handleRequest();break;case"tsc-two":t.write("Hello World");break;default:t.write("Page not found")}t.end()})))).listen(6789),console.log("server is started with port",6789)}}},334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;t.Utils=class{static getUrlBasePath(e){return e?e.split("/")[1]:""}}},239:e=>{e.exports=require("events")},685:e=>{e.exports=require("http")}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(()=>{const e=r(735);(new class{constructor(){this.server=new e.Server}madeSever(){this.server.createServer()}}).madeSever()})()})();